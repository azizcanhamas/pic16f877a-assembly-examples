;2x7 segment displayde dijital bir saatin saniye k?sm?n? 0-59 arasi sayan program
    
    #include <p16f877A.inc>
    
    SOL_COUNTER EQU 0X20
    SAG_COUNTER EQU 0X21
 
    TMR0_COUNTER EQU 0X22
 
    G1 EQU 0X23
    G2 EQU 0X24
    G3 EQU 0X25
    
    ORG 0X00
    GOTO SETUP
    
    ORG 0X04
    GOTO KESME
    
    KESME
	BCF INTCON,T0IF
	MOVLW 0X06
	MOVWF TMR0
	DECFSZ TMR0_COUNTER,1
	RETFIE
	MOVLW 0XFA
	MOVWF TMR0_COUNTER
	
	CALL ARTTIR
	CALL DISPLAY_GORUNTULE
	
	RETFIE
    
    ARTTIR
	INCF SAG_COUNTER
	MOVFW SAG_COUNTER
	SUBLW 0X0A
	BTFSC STATUS,Z
	CALL SOL_ARTTIR
	RETURN
	
    SOL_ARTTIR
	INCF SOL_COUNTER
	CLRF SAG_COUNTER
	RETURN
	
    DISPLAY_GORUNTULE
	BSF PORTC,0
	BSF PORTC,1
	
	MOVFW SOL_COUNTER
	CALL LOOK_UP_TABLE
	MOVWF PORTB
	
	BSF PORTC,1
	BCF PORTC,0
	CALL GECIKME
	
	BSF PORTC,0
	BSF PORTC,1
	
	MOVFW SAG_COUNTER
	CALL LOOK_UP_TABLE
	MOVWF PORTB
	
	BSF PORTC,0
	BCF PORTC,1
	CALL GECIKME
	
	RETURN
	
    SETUP
	BANKSEL TRISB
	CLRF TRISB
	CLRF TRISC
	BANKSEL PORTB
	CLRF PORTB
	MOVLW 0XFF
	MOVWF PORTC
	
	MOVLW 0X00
	MOVWF SOL_COUNTER
	
	MOVLW 0X00
	MOVWF SAG_COUNTER
	
	BANKSEL OPTION_REG
	MOVLW 0X02
	MOVWF OPTION_REG
	
	BANKSEL PORTB
	BSF INTCON,GIE
	BSF INTCON,T0IE
	
	MOVLW 0X06
	MOVWF TMR0
	
	MOVLW 0XFA
	MOVWF TMR0_COUNTER
	
	GOTO MAIN
	
    LOOK_UP_TABLE
	ADDWF PCL,1
	RETLW 0X3F
	RETLW 0X06
	RETLW 0X5B
	RETLW 0X4F
	RETLW 0X66
	RETLW 0X6D
	RETLW 0X7D
	RETLW 0X07
	RETLW 0X7F
	RETLW 0X6F
	
    GECIKME
	MOVLW 0XFF
	MOVWF G1
	
	MOVLW 0XFF
	MOVWF G2
	
	MOVLW 0X01
	MOVWF G3
	
	AA:
	    DECFSZ G1,1
	    GOTO AA
	    
	    DECFSZ G2,1
	    GOTO AA
	    
	    DECFSZ G3,1
	    GOTO AA
	    
	RETURN
	
	
    MAIN
	GOTO MAIN
	
    END


