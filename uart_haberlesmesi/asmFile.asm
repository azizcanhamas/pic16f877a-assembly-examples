#include <p16f877A.inc>
    
    TMP EQU 0X20
    
    ORG 0X00
    GOTO BASLA
    
    ORG 0X04
    GOTO KESME
    
    KESME
	BANKSEL PIR1
	BCF PIR1,RCIF
	MOVFW RCREG
	MOVWF TMP
	
	BCF STATUS,Z
	MOVLW A'1'
	SUBWF TMP,0
	BTFSS STATUS,Z
	GOTO SONDUR
	BANKSEL PORTB
	BSF PORTB,0
	MOVLW A'Y'
	CALL GONDER
	RETFIE
	SONDUR
	BCF STATUS,Z
	MOVLW A'0'
	SUBWF TMP,0
	BTFSS STATUS,Z
	RETFIE
	BANKSEL PORTB
	BCF PORTB,0
	MOVLW A'S'
	CALL GONDER
	
	RETFIE
    
    AYAR
	BANKSEL TRISB
	CLRF TRISB
	MOVLW 0XFF
	MOVWF TRISC
	
	MOVLW 0X19
	MOVWF SPBRG
	
	MOVLW 0X26
	MOVWF TXSTA
	
	BANKSEL RCSTA
	MOVLW 0X90
	MOVWF RCSTA
	
	BANKSEL PORTB
	RETURN
	
    KESME_AYAR
	BANKSEL PIE1
	BCF PIE1,TXIE
	BSF PIE1,RCIE
	MOVLW 0XC0
	MOVWF INTCON
	RETURN
	
    GONDER
	BTFSS PIR1,TXIF
	GOTO $-1
	BCF PIR1,TXIF
	BANKSEL TXREG
	MOVWF TXREG
	RETURN
    
    BASLA
	CALL AYAR
	CALL KESME_AYAR
	GG
	    GOTO GG
	    
    END


